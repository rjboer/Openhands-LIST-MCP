# =======================================================================
# Build & release Openhands-LIST-MCP under SLSA Level 3 (Go 1.22)
# =======================================================================

name: SLSA Go releaser

on:
  release:
    types: [created]          # fires when you publish a GitHub Release
  workflow_dispatch:          # manual run button

# global least-privilege
permissions:
  contents: write             # upload release assets
  id-token: write             # sign the provenance
  actions: read               # read this workflow itself

jobs:
  build:
    # ---------------------------------------------------------------
    # Reusable workflow maintained by the SLSA Framework team
    # ---------------------------------------------------------------
    uses: slsa-framework/slsa-github-generator/.github/workflows/builder_go_slsa3.yml@v2.1.0

    # job-specific permission overrides (optional but explicit)
    permissions:
      contents: write
      id-token: write
      actions: read

    with:
      go-version: 1.22                 # projectâ€™s Go version
      config-file: .slsa-goreleaser.yml
